(this["webpackJsonpelevator-challenge"]=this["webpackJsonpelevator-challenge"]||[]).push([[0],{11:function(e){e.exports=JSON.parse('[{"id":1,"floorsCount":26,"elevatorsCount":5,"elevatorDelay":2,"elevatorSpeed":3},{"id":2,"floorsCount":21,"elevatorsCount":3,"elevatorDelay":1,"elevatorSpeed":2},{"id":3,"floorsCount":16,"elevatorsCount":2,"elevatorDelay":3,"elevatorSpeed":1},{"id":4,"floorsCount":11,"elevatorsCount":1,"elevatorDelay":2,"elevatorSpeed":2}]')},17:function(e,t,a){},18:function(e,t,a){},23:function(e,t,a){"use strict";a.r(t);var o=a(1),n=a.n(o),r=a(3),l=a.n(r),c=a(8),s=a.n(c),i=a(10),u=a(5),v=(a(17),a(18),a(2)),d=a(9),f=a(26),j=a.p+"static/media/elv.57cf1df4.png",b=a(0),h=function(e){var t=e.elevatorIndex,a=e.elevatorsQueues,n=(e.elevatorDelay,e.elevatorSpeed),r=e.elevatorLocation,l=e.removeFromQueue,c=e.updateElevatorLocation,s=a[t],i=Math.abs(s[0]-r)/n*1e3,u=s[0]&&!!s[0].length,v=u?110*s[0]:110*r;Object(o.useEffect)((function(){console.log("Queue",t,":",s),console.log("elevatorLocation",t,":",r),s.length&&(c(t,s[0]),l(t))}),[a]);var h={transition:"bottom ".concat(i,"ms ease"),bottom:110*r},O={entering:{bottom:110*r},entered:{bottom:110*r},exiting:{bottom:v},exited:{bottom:v}};return Object(b.jsx)(f.a,{timeout:i,onEntered:console.log("entered"),onExited:console.log("exited"),in:u,children:function(e){return Object(b.jsx)("img",{onAnimationEnd:console.log("maaaaaaaaa"),style:Object(d.a)(Object(d.a)({},h),O[e]),onClick:function(){c(t,s[0]),l(t)},className:"elevator",src:j,alt:""})}})},O=function(e){var t=e.floorId,a=e.addToQueue,o=e.elevators.flat().findIndex((function(e){return e===t}))>-1;return Object(b.jsxs)("div",{className:"floor floor-size",children:[Object(b.jsx)("div",{className:"blackline"}),Object(b.jsx)("button",{className:"controller metal linear ".concat(o?"active":""),onClick:function(){a(t)},children:t})]})},m=function(e){var t=e.floorsCount,a=e.elevatorsCount,n=e.elevatorDelay,r=e.elevatorSpeed,l=Object(v.a)(Array(t).fill(null)),c=Object(o.useState)(Array.from(Array(a),(function(){return new Array(0)}))),s=Object(u.a)(c,2),i=s[0],d=s[1],f=Object(o.useState)(Object(v.a)(Array(a).fill(0))),j=Object(u.a)(f,2),m=j[0],p=j[1];Object(o.useEffect)((function(){}),[i,m]);var x=function(e){var t=C(e);if(!(i.flat().findIndex((function(t){return t===e}))>-1)){var a=Object(v.a)(i);a[t].push(e),d(a)}},g=function(e){if(i[e].length){var t=Object(v.a)(i);t[e].shift(),d(t)}},y=function(e,t){if(i[e].length){var a=Object(v.a)(m);a[e]=i[e][0],p(a)}},C=function(e){var t=Object(v.a)(Array(a).fill(1/0));return i.forEach((function(a,o){var l;a.length?l=a.reduce((function(e,t,a,o){return e=a>0?e+Math.abs(o[a]-o[a-1]):e+0}))/r+n*a.length+Math.abs(e-a[a.length-1])/r:l=Math.abs(e-m[o])/r;t[o]=l})),t.indexOf(Math.min.apply(Math,Object(v.a)(t)))};return Object(b.jsxs)("div",{className:"building",children:[Object(b.jsx)("div",{className:"floors",children:l.map((function(e,t,a){return Object(b.jsx)("div",{className:"floor",children:Object(b.jsx)(O,{addToQueue:x,floorId:a.length-t-1,elevators:i})},t)}))}),Object(b.jsx)("div",{className:"shafts",children:i.map((function(e,a){return Object(b.jsx)("div",{style:{height:110*t+8+"px"},className:"shaft",children:Object(b.jsx)(h,{elevatorIndex:a,elevatorsQueues:i,elevatorSpeed:r,elevatorDelay:n,elevatorLocation:m[a],removeFromQueue:g,updateElevatorLocation:y})},a)}))})]})},p=a(11);var x=function(){var e=Object(o.useState)([]),t=Object(u.a)(e,2),a=t[0],n=t[1],r=Object(o.useCallback)(Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p;case 2:t=e.sent,n(t);case 4:case"end":return e.stop()}}),e)}))),[]);return Object(o.useEffect)((function(){r()}),[r]),a&&a.length?Object(b.jsx)("div",{className:"App",children:Object(b.jsx)("div",{className:"street",children:a.map((function(e){return Object(b.jsx)(m,{floorsCount:e.floorsCount,elevatorsCount:e.elevatorsCount,elevatorSpeed:e.elevatorSpeed,elevatorDelay:e.elevatorDelay},e.id)}))})}):"Loading..."};l.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(x,{})}),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.4eebe56a.chunk.js.map